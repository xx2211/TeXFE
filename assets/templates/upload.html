<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeXFE ä¸Šä¼ </title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            height: 100vh; margin: 0; background: #f2f2f7; 
        }
        .card {
            background: white; padding: 40px; border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); text-align: center;
            width: 80%; max-width: 400px;
        }
        h1 { margin-top: 0; color: #333; font-size: 24px; }
        p { color: #666; margin-bottom: 30px; }
        
        .upload-btn-wrapper {
            position: relative; overflow: hidden; display: inline-block;
        }
        .btn {
            border: none; color: white; background-color: #007aff;
            padding: 15px 32px; border-radius: 12px; font-size: 18px; font-weight: bold;
            cursor: pointer; width: 100%; box-sizing: border-box;
        }
        .btn:active { background-color: #0056b3; }
        
        /* è®© input è¦†ç›–åœ¨æŒ‰é’®ä¸Šï¼Œå®ç°ç‚¹å‡» */
        .upload-btn-wrapper input[type=file] {
            font-size: 100px; position: absolute; left: 0; top: 0; opacity: 0; cursor: pointer;
        }
        
        #status { margin-top: 20px; font-weight: bold; min-height: 24px; }
        .success { color: #34c759; }
        .error { color: #ff3b30; }
        .loading { color: #007aff; }
    </style>
</head>
<body>
    <div class="card">
        <h1>ğŸ¦Š TeXFE</h1>
        <p>è¯·æ‹æ‘„æˆ–ä¸Šä¼ æ•°å­¦å…¬å¼</p>
        
        <div class="upload-btn-wrapper">
            <button class="btn">ğŸ“· æ‹ç…§ / ä¸Šä¼ </button>
            <input type="file" accept="image/*" capture="environment" onchange="upload(this)">
        </div>
        
        <div id="status"></div>
    </div>

    <script>
        function upload(input) {
            if (input.files && input.files[0]) {
                const status = document.getElementById('status');
                status.innerText = "â³ æ­£åœ¨ä¼ è¾“...";
                status.className = "loading";
                
                var formData = new FormData();
                formData.append("file", input.files[0]);
                
                fetch("/", { method: "POST", body: formData })
                .then(r => r.text())
                .then(msg => { 
                    status.innerText = "âœ… ä¸Šä¼ æˆåŠŸï¼è¯·çœ‹ç”µè„‘å±å¹•ã€‚"; 
                    status.className = "success";
                    // ä¸Šä¼ æˆåŠŸåæ¸…ç©º inputï¼Œå…è®¸é‡å¤ä¸Šä¼ åŒä¸€å¼ å›¾
                    input.value = ''; 
                })
                .catch(e => { 
                    status.innerText = "âŒ å¤±è´¥: " + e; 
                    status.className = "error";
                });
            }
        }
    </script>
</body>
</html>